Yii2-partnership
==========
Это модуль для реализации партнерсской программы. Пользователь, перешедший с сайта-партнера идентифицируется - если он не зарегестрирован в системе, то при переходе он фиксируется за партнером, который привел его. Затам отслеживается его активность по заказам - после завершения заказа партнеру отчисляется определенный процент. По достижению определенной суммы отчислений по заказам клиента партнер может забрать свою выплату.
Для идентификации партнера в системе необходимо: 1. Чтобы он был в таблице user, 2. Чтобы тот пользователь таблицы user, который  должен быть партнером должен быть занесен в таблицу ps_partner, 3. Для идентификации пользователя как партнера в таблице ps_partner в поле partner_id должно быть занесено значение поля id таблицы user соответствующего пользователя. 

Функционал:

* Регистрация переходов
* Привязка пришедшего посетителя к партнеру, который привел посетителя на ресурс.
* Начисление процентов по совершенным (пришедшим пользователем) заказам партнеру, который привел пользователя.
* Управление отчисляемыми процентами

Установка
---------------------------------
Выполнить команду

```
php composer require komer45/yii2-partnership "*"
```

Или добавить в composer.json

```
"komer45/yii2-partnership": "*",
```

И выполнить

```
php composer update
```

Далее, мигрируем базу:

```
php yii migrate --migrationPath=vendor/komer45/yii2-partnership/migrations
```

Подключение и настройка
---------------------------------
Для пользования необходимо подключить модуль в конфиге:

```'php'
	'modules' => [
		'partnership' => [
			'class' => 'komer45\partnership\Module',
			'layout' => 'main'
		],
		//...
	]
```
Для того, чтобы совершить заказ (клиент) и получить отчисления (партнер) нужно подключить виджеты:

```php
<?php
use komer45\partnership\widgets\OrderWidget;
use komer45\partnership\widgets\PaymentWidget;
?>
<?=OrderWidget::widget();?>		//Виджет заказа
<?=PaymentWidget::widget();?>	//Виджет выплат
```